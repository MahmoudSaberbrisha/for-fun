<style>
  .sidebar {
    background: linear-gradient(135deg, #025f51 30%, #014138 100%);
    color: #fff;
    min-height: 100vh;
    width: 250px;
    height: 800px;
    box-shadow: 0 8px 32px 0 rgba(25, 135, 84, 0.37), 0 1.5px 8px 0 #157347;
    /* border-radius: 18px 0 0 18px; */
    padding: 1.5rem 1rem;
    margin-top: -22px;
    transition: box-shadow 0.3s, width 0.3s ease;
  }
  .sidebar-nav ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  .sidebar li {
    margin-bottom: 1rem;
    position: relative;
  }
  .sidebar a,
  .sidebar .dropdown-toggle {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    color: #fff;
    text-decoration: none;
    font-weight: 500;
    background: linear-gradient(135deg, #014138 70%, #026e5e 100%);
    border: none;
    border-radius: 10px;
    box-shadow: 0 2px 8px 0 rgba(21, 115, 71, 0.15);
    padding: 0.75rem 1rem;
    transition: background 0.2s, box-shadow 0.2s, transform 0.15s;
    cursor: pointer;
  }
  .sidebar a:hover,
  .sidebar .dropdown-toggle:hover {
    background: linear-gradient(145deg, #157347 80%, #198754 100%);
    color: #fff;
    box-shadow: 0 4px 16px 0 rgba(21, 115, 71, 0.25);
    transform: translateY(-2px) scale(1.03);
  }
  .sidebar .dropdown-toggle[aria-expanded="true"] {
    background: linear-gradient(145deg, #146c43 80%, #198754 100%);
    box-shadow: 0 6px 18px 0 rgba(21, 115, 71, 0.3);
  }
  .sidebar .dropdown-menu {
    background: #fff;
    color: #198754;
    border: none;
    border-radius: 10px;
    /* margin-top: 0.5rem; */
    box-shadow: 0 4px 16px 0 rgba(25, 135, 84, 0.13);
    padding: 0.5rem 0;
    position: relative;
    z-index: 2;
    animation: dropdownIn 0.25s cubic-bezier(0.4, 2, 0.6, 1) both;
  }
  @keyframes dropdownIn {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  .sidebar .dropdown-menu a {
    color: #198754;
    background: none;
    border-radius: 8px;
    padding: 0.5rem 1.5rem;
    font-weight: 500;
    transition: background 0.2s, color 0.2s, transform 0.15s;
    box-shadow: none;
  }
  .sidebar .dropdown-menu a:hover {
    background: #e9f7ef;
    color: #157347;
    transform: translateX(4px) scale(1.04);
  }
  .sidebar i {
    min-width: 1.5em;
    text-align: center;
    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.15));
    font-size: 1.1em;
  }
  .sidebar:hover {
    width: 300px;
  }
</style>

<aside id="sidebar" class="sidebar">
  <nav class="sidebar-nav">
    <ul>
      <li class="dropdown">
        <button
          class="dropdown-toggle"
          aria-expanded="false"
          aria-controls="definitions-menu"
        >
          <i class="fas fa-book-open"></i> التعريفات
        </button>
        <ul id="definitions-menu" class="dropdown-menu" hidden>
          <li>
            <a href="/api/workdestinations?lang=<%= lang %>"
              ><i class="fas fa-map-marker-alt"></i> وجهات العمل</a
            >
          </li>
          <li>
            <a href="/api/membershiptypes?lang=<%= lang %>"
              ><i class="fas fa-id-badge"></i> أنواع العضوية</a
            >
          </li>
          <li>
            <a href="/api/memberjobs?lang=<%= lang %>"
              ><i class="fas fa-briefcase"></i> وظائف الأعضاء</a
            >
          </li>
          <li>
            <a href="/api/membertitles?lang=<%= lang %>"
              ><i class="fas fa-user-tag"></i> ألقاب الأعضاء</a
            >
          </li>
          <li>
            <a href="/api/meetingplaces?lang=<%= lang %>"
              ><i class="fas fa-building"></i> أماكن الاجتماعات</a
            >
          </li>
          <li>
            <a href="/api/cities?lang=<%= lang %>"
              ><i class="fas fa-city"></i> المدن</a
            >
          </li>
          <li>
            <a href="/api/neighborhoods?lang=<%= lang %>"
              ><i class="fas fa-home"></i> الأحياء</a
            >
          </li>
          <li>
            <a href="/api/suspensionreasons?lang=<%= lang %>"
              ><i class="fas fa-ban"></i> أسباب الإيقاف</a
            >
          </li>
          <li>
            <a href="/api/allentities?lang=<%= lang %>"
              ><i class="fas fa-layer-group"></i> كل الكيانات</a
            >
          </li>
        </ul>
      </li>
      <li>
        <a href="/api/opinionPolls" class="sidebar-link"
          ><i class="fas fa-poll"></i> استطلاع الرأي</a
        >
      </li>
      <li>
        <a href="/api/breakingnews" class="sidebar-link"
          ><i class="fas fa-bolt"></i> الأخبار العاجلة</a
        >
      </li>
      <li class="dropdown">
        <button
          class="dropdown-toggle"
          aria-expanded="false"
          aria-controls="members-files-menu1"
        >
          <i class="fas fa-users"></i> الجمعيه العموميه
        </button>
        <ul id="members-files-menu1" class="dropdown-menu" hidden>
          <li>
            <a href="/api/members" class="sidebar-link"
              ><i class="fas fa-user-plus"></i> اضافه اعضاء</a
            >
          </li>
          <li>
            <a href="/api/members/active-page" class="sidebar-link"
              ><i class="fas fa-user-check"></i> اعضاء الجمعيه العموميه
              النشطين</a
            >
          </li>
          <li>
            <a href="/api/members/inactive-page" class="sidebar-link"
              ><i class="fas fa-user-times"></i> اعضاء الجمعيه العموميه غير
              النشطين</a
            >
          </li>
        </ul>
      </li>
      <li class="dropdown">
        <button
          class="dropdown-toggle"
          aria-expanded="false"
          aria-controls="members-files-menu2"
        >
          <i class="fas fa-handshake"></i> اجتماعات الجمعيه العموميه
        </button>
        <ul id="members-files-menu2" class="dropdown-menu" hidden>
          <li>
            <a href="/api/sessions" class="sidebar-link"
              ><i class="fas fa-users-cog"></i> اجتماعات الجمعيه</a
            >
          </li>
          <li>
            <a href="/invitations" class="sidebar-link"
              ><i class="fas fa-envelope-open-text"></i> دعوه انعقاد جمعيه
              عموميه</a
            >
          </li>
          <li>
            <a href="/api/sessions/only" class="sidebar-link"
              ><i class="fas fa-chalkboard-teacher"></i> الجلسات</a
            >
          </li>
          <li>
            <a href="/api/sessions/active" class="sidebar-link"
              ><i class="fas fa-stream"></i> محاور الجلسات</a
            >
          </li>
          <li>
            <a href="/discussion" class="sidebar-link"
              ><i class="fas fa-comments"></i> مناقشه الجلسات</a
            >
          </li>
        </ul>
      </li>
      <li class="dropdown">
        <button
          class="dropdown-toggle"
          aria-expanded="false"
          aria-controls="members-files-menu3"
        >
          <i class="fas fa-chess-rook"></i> مجلس الاداره
        </button>
        <ul id="members-files-menu3" class="dropdown-menu" hidden>
          <li>
            <a href="/api/boards" class="sidebar-link"
              ><i class="fas fa-users-cog"></i> تكوين مجلس الاداره</a
            >
          </li>
          <li>
            <a href="/api/members/active-page" class="sidebar-link"
              ><i class="fas fa-user-check"></i> الأعضاء النشطين</a
            >
          </li>
          <li>
            <a href="/api/members/inactive-page" class="sidebar-link"
              ><i class="fas fa-user-times"></i> الأعضاء غير النشطين</a
            >
          </li>
        </ul>
      </li>
      <li class="dropdown">
        <button
          class="dropdown-toggle"
          aria-expanded="false"
          aria-controls="members-files-menu4"
        >
          <i class="fas fa-handshake"></i> اجتماعات مجلس الاداره
        </button>
        <ul id="members-files-menu4" class="dropdown-menu" hidden>
          <li>
            <a href="/boardmeetings" class="sidebar-link"
              ><i class="fas fa-door-open"></i> فتح اجتماع</a
            >
          </li>
          <li>
            <a href="/boardmeetings/active" class="sidebar-link"
              ><i class="fas fa-tasks"></i> جدول اعمال المجلس</a
            >
          </li>
          <li>
            <a href="/boardmeetings/minutes-decisions" class="sidebar-link"
              ><i class="fas fa-file-alt"></i> المحاضر والقرارات</a
            >
          </li>
          <li>
            <a href="/boardmeetings/follow-up" class="sidebar-link"
              ><i class="fas fa-clipboard-check"></i> متابعه القرارات</a
            >
          </li>
          <li>
            <a href="/boardmeetings/active" class="sidebar-link"
              ><i class="fas fa-stream"></i> محاور الجلسات</a
            >
          </li>
          <li>
            <a href="/boardmeetings/active" class="sidebar-link"
              ><i class="fas fa-comments"></i> مناقشه الجلسات</a
            >
          </li>
        </ul>
      </li>
      <li class="dropdown">
        <button
          class="dropdown-toggle"
          aria-expanded="false"
          aria-controls="members-files-menu5"
        >
          <i class="fas fa-handshake"></i> الاشتراكات
        </button>
        <ul id="members-files-menu5" class="dropdown-menu" hidden>
          <li>
            <a href="/subscription-logs" class="sidebar-link">
              <i class="fas fa-file-invoice-dollar"></i> سجل الاشتراكات
            </a>
          </li>
          <li>
            <a href="/subscription-logs/add" class="sidebar-link">
              <i class="fas fa-file-invoice-dollar"></i> اضافه اشتراك
            </a>
          </li>
          <li>
            <a href="/member-subscriptions/payment" class="sidebar-link">
              <i class="fas fa-credit-card"></i> سداد اشتراكات العضوية
            </a>
          </li>
        </ul>
      </li>
    </ul>
    <li>
      <a href="/membership-login" class="sidebar-link">
        <i class="fas fa-user-plus"></i> طلب عضوية / تسجيل دخول
      </a>
    </li>
  </nav>
  <div style="text-align: center; margin-top: 2rem">
    <img
      src="/images/management.png"
      alt="صورة توضيحية"
      style="
        max-width: 90%;
        border-radius: 12px;
        box-shadow: 0 2px 12px rgba(25, 135, 84, 0.15);
      "
    />
  </div>
</aside>

<script>
  // Dropdown toggle functionality for nested dropdowns
  document.querySelectorAll(".dropdown-toggle").forEach((button) => {
    button.addEventListener("click", (e) => {
      e.preventDefault();
      const expanded = button.getAttribute("aria-expanded") === "true";
      button.setAttribute("aria-expanded", !expanded);
      const menu = document.getElementById(
        button.getAttribute("aria-controls")
      );
      if (menu) {
        if (menu.hasAttribute("hidden")) {
          menu.removeAttribute("hidden");
        } else {
          menu.setAttribute("hidden", "");
        }
      }
    });
  });
</script>
